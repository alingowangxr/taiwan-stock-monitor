name: Global Market Monitor Parallel

on:
  schedule:
    # å°åŒ—æ™‚é–“é€±ä¸€è‡³é€±äº” 18:30 (UTC 10:30)
    - cron: '30 10 * * 1-5'
  workflow_dispatch: 

jobs:
  # --- ä»»å‹™ Aï¼šç¾åœ‹å¸‚å ´ ---
  us-market:
    name: ğŸ‡ºğŸ‡¸ US Market Analysis
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - name: Environment Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          python -m pip install --upgrade pip
          pip install pandas yfinance requests lxml tqdm resend matplotlib numpy
      - name: Run US Analysis
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py --market us-share

  # --- ä»»å‹™ Bï¼šå°ç£å¸‚å ´ ---
  taiwan-market:
    name: ğŸ‡¹ğŸ‡¼ Taiwan Market Analysis
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - name: Environment Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          python -m pip install --upgrade pip
          pip install pandas yfinance requests lxml tqdm resend matplotlib numpy
      - name: Run TW Analysis
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py --market tw-share

  # --- ä»»å‹™ Cï¼šé¦™æ¸¯å¸‚å ´ (æ–°å¢) ---
  hk-market:
    name: ğŸ‡­ğŸ‡° HK Market Analysis
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - name: Environment Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-noto-cjk
          python -m pip install --upgrade pip
          # ğŸ’¡ ç‰¹åˆ¥æ³¨æ„ï¼šæ¸¯è‚¡ä¸‹è¼‰å™¨éœ€è¦ xlrd ä¾†è§£æ .xls æª”æ¡ˆ
          pip install pandas yfinance requests lxml tqdm resend matplotlib numpy xlrd
      - name: Run HK Analysis
        env:
          RESEND_API_KEY: ${{ secrets.RESEND_API_KEY }}
        run: python main.py --market hk-share
